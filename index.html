<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Backgammon</title>
    <link rel="stylesheet" href="index.css"/>
    <script src="index.js" type="module"></script>
  </head>
  <body>
    <div>
      <div data-player="1">
        <span class="name" contenteditable="true">Player 1</span>
        <svg class="checker" width="20" height="20">
          <use href="#checker-background" style="--checker-radius: 10px;"/>
        </svg>
        <span class="points"><span>0</span> out of <span>5</span> points</span>
        <span class="pip">
          <span>Pip</span>
          <a href="https://bkgm.com/gloss/lookup.cgi?pip+count" target="_blank">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960">
              <path d="M440-280h80v-240h-80v240Zm40-320q17 0 28.5-11.5T520-640q0-17-11.5-28.5T480-680q-17 0-28.5 11.5T440-640q0 17 11.5 28.5T480-600Zm0 520q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z"/>
            </svg>
          </a>
          <span>167</span>
        </span>
      </div>
      <div data-player="2">
        <span class="name" contenteditable="true">Player 2</span>
        <svg class="checker" width="20" height="20">
          <use href="#checker-background" fill="white" style="--checker-radius: 10px;"/>
        </svg>
        <span class="points"><span>0</span> out of <span>5</span> points</span>
        <span class="pip">
          <span>Pip</span>
          <a href="https://bkgm.com/gloss/lookup.cgi?pip+count" target="_blank">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960">
              <path d="M440-280h80v-240h-80v240Zm40-320q17 0 28.5-11.5T520-640q0-17-11.5-28.5T480-680q-17 0-28.5 11.5T440-640q0 17 11.5 28.5T480-600Zm0 520q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z"/>
            </svg>
          </a>
          <span>167</span>
        </span>
      </div>
    </div>

    <svg viewBox="0 0 580 470" data-player="1" data-play-mode="opposite">
      <defs>
        <!-- The point should have dimensions 1:4, so exactly 4 stacked checkers can fill a point -->
        <polyline id="point" points="2,0 20,158 38,0" stroke-width="4" stroke-linejoin="round" stroke-linecap="square"/>
        <circle id="drop-point" r="6" fill="darkorange"/>
        <circle id="checker-background"/>
        <rect id="hold" rx="4"/>
        <rect id="die-face-background" rx="4"/>
        <g id="die-face-pip-1">
          <use href="#die-face-background"/>
          <circle class="die-pip x1 y1"/>
        </g>
        <g id="die-face-pip-2">
          <use href="#die-face-background"/>
          <circle class="die-pip x0 y0"/>
          <circle class="die-pip x2 y2"/>
        </g>
        <g id="die-face-pip-3">
          <use href="#die-face-background"/>
          <circle class="die-pip x0 y0"/>
          <circle class="die-pip x1 y1"/>
          <circle class="die-pip x2 y2"/>
        </g>
        <g id="die-face-pip-4">
          <use href="#die-face-background"/>
          <circle class="die-pip x0 y0"/>
          <circle class="die-pip x0 y2"/>
          <circle class="die-pip x2 y0"/>
          <circle class="die-pip x2 y2"/>
        </g>
        <g id="die-face-pip-5">
          <use href="#die-face-background"/>
          <circle class="die-pip x0 y0"/>
          <circle class="die-pip x0 y2"/>
          <circle class="die-pip x1 y1"/>
          <circle class="die-pip x2 y0"/>
          <circle class="die-pip x2 y2"/>
        </g>
        <g id="die-face-pip-6">
          <use href="#die-face-background"/>
          <circle class="die-pip x0 y0"/>
          <circle class="die-pip x0 y1"/>
          <circle class="die-pip x0 y2"/>
          <circle class="die-pip x2 y0"/>
          <circle class="die-pip x2 y1"/>
          <circle class="die-pip x2 y2"/>
        </g>
      </defs>

      <g>
        <g class="half">
          <rect/>
          <g class="quadrant">
            <use href="#point" data-point="13"/>
            <use href="#point" data-point="14"/>
            <use href="#point" data-point="15"/>
            <use href="#point" data-point="16"/>
            <use href="#point" data-point="17"/>
            <use href="#point" data-point="18"/>
          </g>
          <g class="quadrant">
            <use href="#point" data-point="7"/>
            <use href="#point" data-point="8"/>
            <use href="#point" data-point="9"/>
            <use href="#point" data-point="10"/>
            <use href="#point" data-point="11"/>
            <use href="#point" data-point="12"/>
          </g>
        </g>
        <g class="half">
          <rect/>
          <g class="quadrant">
            <use href="#point" data-point="19"/>
            <use href="#point" data-point="20"/>
            <use href="#point" data-point="21"/>
            <use href="#point" data-point="22"/>
            <use href="#point" data-point="23"/>
            <use href="#point" data-point="24"/>
          </g>
          <g class="quadrant">
            <use href="#point" data-point="1"/>
            <use href="#point" data-point="2"/>
            <use href="#point" data-point="3"/>
            <use href="#point" data-point="4"/>
            <use href="#point" data-point="5"/>
            <use href="#point" data-point="6"/>
          </g>
        </g>
      </g>
      <use href="#hold"/>
      <g id="doubling-cube-face">
        <rect id="die-face-background" rx="4"/>
        <text>64</text>
      </g>
      <use href="#hold"/>

      <foreignObject>
        <div>
          <div>
            <button id="double" type="button">Double</button>
            <button id="undo" type="button" hidden="hidden">Undo</button>
            <button id="confirm" type="button" hidden="hidden">Confirm</button>
          </div>
          <div>
            <button id="roll-dice" type="button">Roll Dice</button>
            <svg id="dice"/>
          </div>
        </div>
      </foreignObject>

      <g id="checkers">
        <g data-player="2" data-point="1" data-point-stack-index="0" data-point-stack-count="2" data-permissible-destination-points="[]" style="--point: 1; --point-stack-index: 0; --point-stack-count: 2;">
          <use href="#checker-background"/>
          <text x="20" y="20"></text>
        </g>
        <g data-player="2" data-point="1" data-point-stack-index="1" data-point-stack-count="2" data-permissible-destination-points="[]" style="--point: 1; --point-stack-index: 1; --point-stack-count: 2;">
          <use href="#checker-background"/>
          <text x="20" y="20"></text>
        </g>
        <g data-player="1" data-point="6" data-point-stack-index="0" data-point-stack-count="5" data-permissible-destination-points="[]" style="--point: 6; --point-stack-index: 0; --point-stack-count: 5;">
          <use href="#checker-background"/>
          <text x="20" y="20"></text>
        </g>
        <g data-player="1" data-point="6" data-point-stack-index="1" data-point-stack-count="5" data-permissible-destination-points="[]" style="--point: 6; --point-stack-index: 1; --point-stack-count: 5;">
          <use href="#checker-background"/>
          <text x="20" y="20"></text>
        </g>
        <g data-player="1" data-point="6" data-point-stack-index="2" data-point-stack-count="5" data-permissible-destination-points="[]" style="--point: 6; --point-stack-index: 2; --point-stack-count: 5;">
          <use href="#checker-background"/>
          <text x="20" y="20"></text>
        </g>
        <g data-player="1" data-point="6" data-point-stack-index="3" data-point-stack-count="5" data-permissible-destination-points="[]" style="--point: 6; --point-stack-index: 3; --point-stack-count: 5;">
          <use href="#checker-background"/>
          <text x="20" y="20"></text>
        </g>
        <g data-player="1" data-point="6" data-point-stack-index="4" data-point-stack-count="5" data-permissible-destination-points="[]" style="--point: 6; --point-stack-index: 4; --point-stack-count: 5;">
          <use href="#checker-background"/>
          <text x="20" y="20"></text>
        </g>
        <g data-player="1" data-point="8" data-point-stack-index="0" data-point-stack-count="3" data-permissible-destination-points="[]" style="--point: 8; --point-stack-index: 0; --point-stack-count: 3;">
          <use href="#checker-background"/>
          <text x="20" y="20"></text>
        </g>
        <g data-player="1" data-point="8" data-point-stack-index="1" data-point-stack-count="3" data-permissible-destination-points="[]" style="--point: 8; --point-stack-index: 1; --point-stack-count: 3;">
          <use href="#checker-background"/>
          <text x="20" y="20"></text>
        </g>
        <g data-player="1" data-point="8" data-point-stack-index="2" data-point-stack-count="3" data-permissible-destination-points="[]" style="--point: 8; --point-stack-index: 2; --point-stack-count: 3;">
          <use href="#checker-background"/>
          <text x="20" y="20"></text>
        </g>
        <g data-player="2" data-point="12" data-point-stack-index="0" data-point-stack-count="5" data-permissible-destination-points="[]" style="--point: 12; --point-stack-index: 0; --point-stack-count: 5;">
          <use href="#checker-background"/>
          <text x="20" y="20"></text>
        </g>
        <g data-player="2" data-point="12" data-point-stack-index="1" data-point-stack-count="5" data-permissible-destination-points="[]" style="--point: 12; --point-stack-index: 1; --point-stack-count: 5;">
          <use href="#checker-background"/>
          <text x="20" y="20"></text>
        </g>
        <g data-player="2" data-point="12" data-point-stack-index="2" data-point-stack-count="5" data-permissible-destination-points="[]" style="--point: 12; --point-stack-index: 2; --point-stack-count: 5;">
          <use href="#checker-background"/>
          <text x="20" y="20"></text>
        </g>
        <g data-player="2" data-point="12" data-point-stack-index="3" data-point-stack-count="5" data-permissible-destination-points="[]" style="--point: 12; --point-stack-index: 3; --point-stack-count: 5;">
          <use href="#checker-background"/>
          <text x="20" y="20"></text>
        </g>
        <g data-player="2" data-point="12" data-point-stack-index="4" data-point-stack-count="5" data-permissible-destination-points="[]" style="--point: 12; --point-stack-index: 4; --point-stack-count: 5;">
          <use href="#checker-background"/>
          <text x="20" y="20"></text>
        </g>
        <g data-player="1" data-point="13" data-point-stack-index="0" data-point-stack-count="5" data-permissible-destination-points="[]" style="--point: 13; --point-stack-index: 0; --point-stack-count: 5;">
          <use href="#checker-background"/>
          <text x="20" y="20"></text>
        </g>
        <g data-player="1" data-point="13" data-point-stack-index="1" data-point-stack-count="5" data-permissible-destination-points="[]" style="--point: 13; --point-stack-index: 1; --point-stack-count: 5;">
          <use href="#checker-background"/>
          <text x="20" y="20"></text>
        </g>
        <g data-player="1" data-point="13" data-point-stack-index="2" data-point-stack-count="5" data-permissible-destination-points="[]" style="--point: 13; --point-stack-index: 2; --point-stack-count: 5;">
          <use href="#checker-background"/>
          <text x="20" y="20"></text>
        </g>
        <g data-player="1" data-point="13" data-point-stack-index="3" data-point-stack-count="5" data-permissible-destination-points="[]" style="--point: 13; --point-stack-index: 3; --point-stack-count: 5;">
          <use href="#checker-background"/>
          <text x="20" y="20"></text>
        </g>
        <g data-player="1" data-point="13" data-point-stack-index="4" data-point-stack-count="5" data-permissible-destination-points="[]" style="--point: 13; --point-stack-index: 4; --point-stack-count: 5;">
          <use href="#checker-background"/>
          <text x="20" y="20"></text>
        </g>
        <g data-player="2" data-point="17" data-point-stack-index="0" data-point-stack-count="3" data-permissible-destination-points="[]" style="--point: 17; --point-stack-index: 0; --point-stack-count: 3;">
          <use href="#checker-background"/>
          <text x="20" y="20"></text>
        </g>
        <g data-player="2" data-point="17" data-point-stack-index="1" data-point-stack-count="3" data-permissible-destination-points="[]" style="--point: 17; --point-stack-index: 1; --point-stack-count: 3;">
          <use href="#checker-background"/>
          <text x="20" y="20"></text>
        </g>
        <g data-player="2" data-point="17" data-point-stack-index="2" data-point-stack-count="3" data-permissible-destination-points="[]" style="--point: 17; --point-stack-index: 2; --point-stack-count: 3;">
          <use href="#checker-background"/>
          <text x="20" y="20"></text>
        </g>
        <g data-player="2" data-point="19" data-point-stack-index="0" data-point-stack-count="5" data-permissible-destination-points="[]" style="--point: 19; --point-stack-index: 0; --point-stack-count: 5;">
          <use href="#checker-background"/>
          <text x="20" y="20"></text>
        </g>
        <g data-player="2" data-point="19" data-point-stack-index="1" data-point-stack-count="5" data-permissible-destination-points="[]" style="--point: 19; --point-stack-index: 1; --point-stack-count: 5;">
          <use href="#checker-background"/>
          <text x="20" y="20"></text>
        </g>
        <g data-player="2" data-point="19" data-point-stack-index="2" data-point-stack-count="5" data-permissible-destination-points="[]" style="--point: 19; --point-stack-index: 2; --point-stack-count: 5;">
          <use href="#checker-background"/>
          <text x="20" y="20"></text>
        </g>
        <g data-player="2" data-point="19" data-point-stack-index="3" data-point-stack-count="5" data-permissible-destination-points="[]" style="--point: 19; --point-stack-index: 3; --point-stack-count: 5;">
          <use href="#checker-background"/>
          <text x="20" y="20"></text>
        </g>
        <g data-player="2" data-point="19" data-point-stack-index="4" data-point-stack-count="5" data-permissible-destination-points="[]" style="--point: 19; --point-stack-index: 4; --point-stack-count: 5;">
          <use href="#checker-background"/>
          <text x="20" y="20"></text>
        </g>
        <g data-player="1" data-point="24" data-point-stack-index="0" data-point-stack-count="2" data-permissible-destination-points="[]" style="--point: 24; --point-stack-index: 0; --point-stack-count: 2;">
          <use href="#checker-background"/>
          <text x="20" y="20"></text>
        </g>
        <g data-player="1" data-point="24" data-point-stack-index="1" data-point-stack-count="2" data-permissible-destination-points="[]" style="--point: 24; --point-stack-index: 1; --point-stack-count: 2;">
          <use href="#checker-background"/>
          <text x="20" y="20"></text>
        </g>
      </g>

      <g id="drop-points"/>
    </svg>
  </body>
</html>
